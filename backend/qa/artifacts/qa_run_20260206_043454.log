[2026-02-06 04:34:54] QA run started
[2026-02-06 04:34:55] BackendRoot=C:\Users\ayomc\Desktop\FLIPTRYBE.inc\Fliptrybe\backend
[2026-02-06 04:34:55] BaseUrl=http://127.0.0.1:5000
[2026-02-06 04:34:55] Running migrations
[2026-02-06 04:35:11] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2026-02-06 04:35:11] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2026-02-06 04:35:29] Server started PID=5600
[2026-02-06 04:35:42] [BOOT] health => PASS (200) GET /api/health
[2026-02-06 04:35:45] [BOOT] seed => PASS (201) POST /api/demo/seed
[2026-02-06 04:35:45] Users: buyer=qa_run_buyer_1528495822@t.com, driver=qa_run_driver_800052620@t.com, merchant=qa_run_merchant_769126245@t.com, inspector=qa_run_inspector_496070618@t.com
[2026-02-06 04:35:51] [BOOT] register_roles => PASS (201/201/201/201) register buyer/driver/merchant/inspector
[2026-02-06 04:35:54] [BOOT] login_roles => PASS (200/200/200/200) login + token capture
[2026-02-06 04:35:57] [BOOT] admin_approvals => PASS (merchant=200,driver=200) approve role requests
[2026-02-06 04:36:05] orderD=59
[2026-02-06 04:36:08] [REGRESSION] D_pickup_replay => PASS (200/200/200/409) order=59
[2026-02-06 04:36:08] DB SNAP D order=59
[2026-02-06 04:36:11] escrow_unlocks=[72,59,"pickup_seller",0,4,0,1,1,"2026-02-06 12:36:07.588769","2026-02-07 12:36:05.673620"]
[2026-02-06 04:36:11] qr_challenges=[66,59,"pickup_seller","driver","scanned",142,"2026-02-06 12:36:06.314359","2026-02-06 12:36:06.916001","2026-02-06 12:51:06.314367"]
[2026-02-06 04:36:11] orders=[59,"picked_up","3166","2990",0,0,"2026-02-06 12:36:07.588802","HELD",27000.0]
[2026-02-06 04:36:12] [REGRESSION] E_qr_replay => PASS (400) order=59
[2026-02-06 04:36:12] DB SNAP E order=59
[2026-02-06 04:36:14] escrow_unlocks=[72,59,"pickup_seller",0,4,0,1,1,"2026-02-06 12:36:07.588769","2026-02-07 12:36:05.673620"]
[2026-02-06 04:36:14] qr_challenges=[66,59,"pickup_seller","driver","scanned",142,"2026-02-06 12:36:06.314359","2026-02-06 12:36:06.916001","2026-02-06 12:51:06.314367"]
[2026-02-06 04:36:14] orders=[59,"picked_up","3166","2990",0,0,"2026-02-06 12:36:07.588802","HELD",27000.0]
[2026-02-06 04:36:23] [REGRESSION] F_lockout_unlock => PASS (attempts=400,400,400,423; proof=200; admin=200; post=200) order=60
[2026-02-06 04:36:23] DB SNAP F order=60
[2026-02-06 04:36:25] escrow_unlocks=[73,60,"pickup_seller",0,4,0,1,1,"2026-02-06 12:36:23.350932","2026-02-07 12:36:18.595667"]
[2026-02-06 04:36:25] qr_challenges=[67,60,"pickup_seller","driver","scanned",142,"2026-02-06 12:36:18.801621","2026-02-06 12:36:20.248727","2026-02-06 12:51:18.801627"]
[2026-02-06 04:36:25] orders=[60,"picked_up","3368","5188",0,0,"2026-02-06 12:36:23.350956","HELD",27000.0]
[2026-02-06 04:36:30] [REGRESSION] G_cross_role_tamper => PASS (403/403/403/403) order=61
[2026-02-06 04:36:30] DB SNAP G order=61
[2026-02-06 04:36:32] escrow_unlocks=[74,61,"pickup_seller",0,4,0,1,0,"2026-02-07 12:36:29.290045"]
[2026-02-06 04:36:32] qr_challenges=
[2026-02-06 04:36:32] orders=[61,"driver_assigned","3396","0717",0,0,"HELD",27000.0]
[2026-02-06 04:36:42] [REGRESSION] happy_path_delivery => PASS (200/200/200/200/200/200/200/200) order=62, events=paid,created,availability_yes,merchant_accepted,driver_assigned,picked_up,picked_up,escrow_released,delivered,completed
[2026-02-06 04:36:42] timeline_order_62={"items":[{"actor_user_id":140,"created_at":"2026-02-06T12:36:33.409300","event":"paid","id":400,"note":"Order marked paid","order_id":62},{"actor_user_id":140,"created_at":"2026-02-06T12:36:33.427065","event":"created","id":401,"note":"Order created","order_id":62},{"actor_user_id":null,"created_at":"2026-02-06T12:36:34.414387","event":"availability_yes","id":402,"note":"Availability confirmed","order_id":62},{"actor_user_id":142,"created_at":"2026-02-06T12:36:34.979646","event":"merchant_accepted","id":403,"note":"Merchant accepted order","order_id":62},{"actor_user_id":142,"created_at":"2026-02-06T12:36:35.512100","event":"driver_assigned","id":404,"note":"Assigned driver 141","order_id":62},{"actor_user_id":142,"created_at":"2026-02-06T12:36:38.559288","event":"picked_up","id":405,"note":"Pickup confirmed (QR + code)","order_id":62},{"actor_user_id":141,"created_at":"2026-02-06T12:36:41.031699","event":"picked_up","id":406,"note":"Driver set status to picked_up","order_id":62},{"actor_user_id":null,"created_at":"2026-02-06T12:36:41.796263","event":"escrow_released","id":407,"note":"Escrow released","order_id":62},{"actor_user_id":141,"created_at":"2026-02-06T12:36:41.805723","event":"delivered","id":408,"note":"Delivery confirmed (QR + code)","order_id":62},{"actor_user_id":141,"created_at":"2026-02-06T12:36:42.032143","event":"completed","id":409,"note":"Driver set status to completed","order_id":62}],"ok":true}
[2026-02-06 04:36:42] DB SNAP HAPPY order=62
[2026-02-06 04:36:44] escrow_unlocks=[{"value":[75,62,"pickup_seller",0,4,0,1,1,"2026-02-06 12:36:37.328115","2026-02-07 12:36:35.222715",null],"Count":11},{"value":[76,62,"delivery_driver",0,4,0,1,1,"2026-02-06 12:36:41.717964","2026-02-07 12:36:40.809943",null],"Count":11}]
[2026-02-06 04:36:44] qr_challenges=[{"value":[68,62,"pickup_seller","driver","scanned",142,"2026-02-06 12:36:35.931066","2026-02-06 12:36:36.021007","2026-02-06 12:51:35.931074"],"Count":9},{"value":[69,62,"delivery_driver","buyer","scanned",141,"2026-02-06 12:36:41.154362","2026-02-06 12:36:41.268474","2026-02-06 12:51:41.154367"],"Count":9}]
[2026-02-06 04:36:44] orders=[62,"completed","3008","0540",0,0,"2026-02-06 12:36:37.328141","2026-02-06 12:36:41.718000","RELEASED",27000.0,"2026-02-06 12:36:41.787043"]
[2026-02-06 04:36:46] [REGRESSION] ledger_reconcile => PASS (ledger=200/200/200/200, demo=200, recon=200) order_ref=order:62, kinds=order_sale,platform_fee,delivery_fee,delivery_commission
[2026-02-06 04:36:46] reconcile={"fixed":0,"issues":[],"ok":true}
[2026-02-06 04:36:47] Running invariants
[2026-02-06 04:36:48] [INVARIANTS] seller_cannot_buy_own => PASS (409) orders_before=0, orders_after=0, wallet_ref_rows=0
[2026-02-06 04:36:50] [INVARIANTS] follow_rules => PASS (201/403/403) merchant_follow_rows=0, buyer_follow_rows=1
[2026-02-06 04:36:51] [INVARIANTS] chat_rules => PASS (201/201/201/403/403/403/404) support chat/admin gating validated
